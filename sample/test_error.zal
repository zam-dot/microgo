// // error_test.zal
// @c {
//     #include <stdio.h>
//     #include <string.h>
// }
//
// @c {
//     // A simple C function that returns an error
//     int might_fail(int flag, char** error_out) {
//         if (flag < 0) {
//             *error_out = "Negative flag not allowed";
//             return -1;
//         }
//         return flag * 2;
//     }
// }
//
// func main() {
//     // Try to call the C function with error handling
//     result, err := might_fail(5)
//
//     if err != nil {
//         print("Error: %s\n", err)
//     } else {
//         print("Success: result = %d\n", result)
//     }
//
//     // Test error case
//     result2, err2 := might_fail(-5)
//
//     if err2 != nil {
//         print("Error case worked: %s\n", err2)
//     } else {
//         print("Unexpected success: %d\n", result2)
//     }
//
// }

@c { 
    #include <stdio.h> 
    #include <string.h>
}

func divide(a: int, b: double, error_out: int): double {
    if b == 0 {
        return 0
    }
    return a / b
}

func main() {
     result, err := divide(10, 0)
     if err != nil {
         print("Error: %s\n", err)
     } else {
         print("Success: result = %d\n", result)
     }
}
